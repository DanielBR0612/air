<div class="flex justify-content-center align-items-center min-h-screen surface-ground p-4">
  <p-card [style]="{ width: '100%', maxWidth: '600px' }" styleClass="shadow-4">
    
    <ng-template pTemplate="header">
      <div class="bg-primary text-white font-bold p-3 border-round-top">
        <i class="pi" [ngClass]="modoEdicao() ? 'pi-pencil' : 'pi-plus-circle'"></i>
        {{ modoEdicao() ? 'Editar Item' : 'Novo Item' }}
      </div>
    </ng-template>

    <form (submit)="salvar($event)" class="flex flex-column gap-4 mt-3">
      
      <div class="flex flex-column gap-2">
        <label for="titulo" class="font-semibold">Título</label>
        
        <input 
          pInputText 
          id="titulo" 
          [formField]="itemForm.titulo"
          placeholder="Ex: Reunião de Projeto"
          [class.ng-invalid]="itemForm.titulo().touched() && itemForm.titulo().invalid()"
          [class.ng-dirty]="itemForm.titulo().touched()"
        />
        
        @if (itemForm.titulo().touched() && itemForm.titulo().invalid()) {
          <div>
            @for (error of itemForm.titulo().errors(); track error) {
              <small class="text-red-500 block">{{ error.message }}</small>
            }
          </div>
        }
      </div>

      <div class="flex flex-column gap-2">
        <label for="descricao" class="font-semibold">Descrição</label>
        
        <textarea 
          pInputTextarea 
          id="descricao" 
          rows="5"
          [formField]="itemForm.descricao"
          placeholder="Detalhes do item..."
          [class.ng-invalid]="itemForm.descricao().touched() && itemForm.descricao().invalid()"
          style="width: 100%; resize: vertical;"
        ></textarea>
        
        @if (itemForm.descricao().touched() && itemForm.descricao().invalid()) {
          <div>
            @for (error of itemForm.descricao().errors(); track error) {
              <small class="text-red-500 block">{{ error.message }}</small>
            }
          </div>
        }
      </div>

      <div class="flex justify-content-end gap-2 mt-4">
        
        <p-button 
          label="Cancelar" 
          icon="pi pi-times" 
          styleClass="p-button-text p-button-secondary" 
          (onClick)="cancelar()">
        </p-button>

        <p-button 
          type="submit" 
          [label]="modoEdicao() ? 'Atualizar' : 'Salvar'" 
          icon="pi pi-check" 
          [loading]="loading()"
          [disabled]="itemForm.titulo().invalid() || itemForm.descricao().invalid()">
        </p-button>
        
      </div>

    </form>
  </p-card>
</div>